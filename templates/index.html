{% extends "layout.html" %}

{% block title %}Kalastuspaikat{% endblock %}

{% block content %}
<h2>Paikka ilmoitukset</h2>

<form action="/" method="get">
  <label for="query">Hae:</label><br>
  <input type="text" id="query" name="query" placeholder="Hae paikkoja..." value="{{ query }}">
  <button type="submit">Hae</button>
</form>

{% if query %}
  <p>Hakutulokset hakusanalla: <strong>{{ query }}</strong></p>
{% endif %}

<p>
  {% if page > 1 %}
    <a href="/{{ page - 1 }}?query={{ query }}">&lt;</a>
  {% endif %}
  Sivu {{ page }}/{{ page_count }}
  {% if page < page_count %}
    <a href="/{{ page + 1 }}?query={{ query }}">&gt;</a>
  {% endif %}
</p>

{% if not places %}
  <li>Ei tuloksia</li>
{% else %}
  {% for place in places %}
    <div class="place-box">
      <a href="/place/{{ place.id }}">{{ place.title }}</a><br>
      <small>
        K채ytt채j채lt채: <a href="/user/{{ place.username }}">{{ place.username }}</a>
        {% if place_classes.get(place.id) %}
          | 
          {% for class in place_classes[place.id] %}
            {{ class }}{% if not loop.last %} | {% endif %}
          {% endfor %}
        {% endif %}
      </small>
    </div>
  {% endfor %}
{% endif %}
{% endblock %}
